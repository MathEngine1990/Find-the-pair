 <!-- index.html- путь отдельного файла -->

<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <title>Find the Pair</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <div id="game"></div>

  <!-- Локальный Phaser (важно: до сцен) -->
  <script src="lib/phaser.min.js"></script>

  <!-- Глобальные данные/тема и UI (важно: Buttons.js до сцен) -->
  <script src="ui/Theme.js"></script>
  <script src="game/Data.js"></script>
  <script src="ui/Button.js"></script>

  <!-- Быстрый чек: реально ли загрузился Buttons.js -->
  <script>
    console.log('Buttons loaded?', typeof window.makeImageButton);
    if (typeof window.makeImageButton !== 'function') {
      console.warn('ui/Buttons.js НЕ загрузился — возможно 404/неверный путь. Включаю временный стаб.');
      window.makeImageButton = function(scene,x,y,w,h,label,onClick){
        const t = scene.add.text(x,y,label,{fontFamily:'sans-serif',fontSize:'18px',color:'#fff'}).setOrigin(0.5);
        const z = scene.add.zone(x,y,w,h).setOrigin(0.5).setInteractive({useHandCursor:true});
        z.on('pointerdown',()=>onClick&&onClick());
        const c = scene.add.container(0,0,[t,z]); c.setSize(w,h); return c;
      };
      window.makeIconButton = function(scene,x,y,size,icon,onClick){
        return window.makeImageButton(scene,x,y,size,size,icon,onClick);
      };
    }
  </script>

  <!-- Сцены -->
  <script src="scenes/PreloadScene.js"></script>
  <script src="scenes/MenuScene.js"></script>
  <script src="scenes/GameScene.js"></script>

  <!-- Инициализация игры (важно: parent совпадает с id="game") -->
  <script>
    const DPR = Math.min(2, window.devicePixelRatio || 1);
    const config = {
      type: Phaser.AUTO,
      parent: 'game',
      backgroundColor: '#000000',
      scale: {
        mode: Phaser.Scale.FIT,
        autoCenter: Phaser.Scale.CENTER_BOTH,
        width: 1080,
        height: 720
      },
      resolution: DPR,
      render: { antialias: true, pixelArt: false },
      scene: [ window.PreloadScene, window.MenuScene, window.GameScene ],
    };
  </script>

  <!-- VK bridge подгрузи в main-vk.js, если нужно, но не мешай запуску игры -->
  <!-- <script src="main-vk.js"></script> -->
  <script src="main.js"></script>
</body>
</html>
